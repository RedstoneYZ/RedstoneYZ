{/*
title: 大型農場必備．物品分類器
version: [1.5, 1.21.4]
created: 2025-01-01
author: Zollo757347
categories: [machine, item]
summary: 不管是哪一種農場，只要擴大規模之後，蒐集掉落物的箱子就會充滿各種物品，變得雜亂不堪，每次要拿出特定的物品時都還要東翻西找，相當不方便。這時候你就需要這篇文章的主題：物品分類器。物品分類器可以幫你把任何可堆疊的物品分類成箱，讓你下次要拿東西時更加快速方便。
*/}

import Image from "@/components/article/Image";
import Note from "@/components/article/Note";
import Notice from "@/components/article/Notice";

不管是哪一種農場，只要擴大規模之後，蒐集掉落物的箱子就會充滿各種物品，變得雜亂不堪，每次要拿出特定的物品時都還要東翻西找，相當不方便。這時候你就需要這篇文章的主題：物品分類器。物品分類器可以幫你把任何可堆疊的物品分類成箱，讓你下次要拿東西時更加快速方便。

## 建造
- 需要方塊：
    - 實體方塊 x6、任意容器 x1
    - 紅石火把 x1、紅石中繼器 x1、紅石比較器 x1、紅石粉 x3、漏斗 x2
- 需要物品：
    - 待分類物品 x1、任意非待分類物品（下文簡稱「垃圾」） x4

<Image src="/images/tutorial/machine/item_sorter/single_layer.png" alt="單層物品分類器" width={500} priority />

<Notice>
1. 上方漏斗的五格空間中，最左邊要放上一個待分類物品，剩下的空間就用四個垃圾填滿，如下圖：
    <Image src="/images/tutorial/machine/item_sorter/hopper_item.png" alt="漏斗內的物品" width={200} />
2. 上方漏斗的輸出方向不可以指向任何容器，通常會把輸出指向相鄰的比較器。
3. 待分類物品必須是可堆疊的，不可堆疊的物品（如工具、藥水等等）沒辦法用這個系統分類。
4. 垃圾也必須是可堆疊的。
5. 上方漏斗中的待分類物品要累積到 41 個以上，才會把額外的待分類物品輸出到容器中，你也可以在一開始就放入 41 個待分類物品，就不會有這段等待時間了。
    1. 64 成堆的物品會需要累積到 41 個才會開始輸出，如果是 16 成堆的物品（如終界珍珠），只需要 11 個物品就會開始輸出了。
</Notice>

<Note>
1. 垃圾可以先用鐵砧命名成任意其他名字，這樣它就不會和其他物品堆疊了。
2. 如果物品比較多，可以在下方漏斗多接幾個指向儲物箱的漏斗，增加儲存空間。
    <Image src="/images/tutorial/machine/item_sorter/larger_storage.png" alt="在輸出端多接幾個儲物箱" width={500} />
</Note>

### 多物品分類
- 需要方塊：
    - 實體方塊 x3N、任意方塊 x3N、任意容器 xN
    - 紅石火把 xN、紅石中繼器 xN、紅石比較器 xN、紅石粉 x3N、**漏斗 x3N**
    - 可選：堆肥箱 xN
- 需要物品：
    - 待分類物品各一、垃圾 x4N

上面說到的結構只能分類一種物品，如果你需要分類多種物品，你需要先把這個單層結構平行排列，而且一樣要在每層的下方漏斗放一個待分類物品與四個垃圾，完成後會如下圖所示：
<Image src="/images/tutorial/machine/item_sorter/multi_layer.png" alt="多層物品分類器" width={500} />

<Notice>
不能使用任何待分類物品來當作垃圾，否則分類機會壞掉。
</Notice>

<Note>
建議先把中繼器一次擺好之後再放中繼器上方的方塊，如果順序反過來你就會被擋住，沒辦法擺中繼器了。
</Note>

最後，你只需要在所有漏斗的上方再擺上一排漏斗就可以了，這層漏斗就是物品實際流動的管道，因此要前後相接，最終的成品如下圖所示：
<Image src="/images/tutorial/machine/item_sorter/hopper_chain.png" alt="在上方漏斗之上加一排前後相接的漏斗" width={500} />

<Note>
你可以在新加上的一排漏斗上方再放一排堆肥箱，這樣會把漏斗上方的接收口擋住，避免漏斗浪費額外的效能接收上方的掉落物。
<Image src="/images/tutorial/machine/item_sorter/composter.png" alt="在漏斗上方加上堆肥箱" width={500} />
</Note>

## 原理

這個物品分類器利用了漏斗的「篩選」與「開關」兩種特性，來達到只讓特定物品通過的效果，我們先從最簡單的單層分類器來說明。
{/* TODO: <圖片> */}

在單層分類器中有兩個漏斗：上方漏斗與下方漏斗，這兩個漏斗各自負責不同的功能：篩選與開關。上方漏斗負責接收來自外界的物品，還記得我們在建造分類器時，要先把上方漏斗填成下面這個樣子嗎？
{/* TODO: <圖片> */}

因為這個漏斗已經沒有多餘的空格了，所以只能接收你放進去的物品（以這個例子來說是樹脂磚頭）以及垃圾（圖中的泥土）。隨著上方漏斗不斷接收物品，旁邊的比較器會增加輸出的訊號強度{/* TODO: 參見比較器 */}，直到漏斗內的物品總數達到 46 時，比較器的輸出訊號會到達 3，這時候下方的中繼器就會接收到它後方被弱充能的訊號，把它前方的方塊充能，最後使紅石火把熄滅。

在最一開始，下方漏斗因為被紅石火把充能而處於關閉的狀態，此時下方漏斗不會接收上方漏斗的內容物，也不會對它指向的容器輸入物品。但當上方漏斗的內容物達到 46 個時，紅石火把會熄滅，使下方漏斗被開啟，這時候根據漏斗吸取物品的規則，會從上方漏斗的最左邊開始拿物品，並把它輸出到儲物箱裡面。因為下方漏斗開始運作，上方漏斗物品會減少，等到內容物只剩 45 個時，紅石火把就會恢復點亮的狀態，把下方漏斗鎖住，使下方漏斗不會把上方漏斗中的物品漏光。
